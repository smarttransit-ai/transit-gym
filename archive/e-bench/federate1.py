import time
import helics as h
import random
import logging
import chargerLoad as ch

helicsversion = h.helicsGetVersion()
print("Federate 1: HELICS version = {}".format(helicsversion))

logger = logging.getLogger(__name__)
logger.addHandler(logging.StreamHandler())
logger.setLevel(logging.DEBUG)

def create_broker():
    initstring = "2 --name=mainbroker"
    broker = h.helicsCreateBroker("zmq", "", initstring)
    isconnected = h.helicsBrokerIsConnected(broker)

    if isconnected == 1:
        pass

    return broker

def create_federate(deltat=1.0, fedinitstring="--federates=1"):

    fedinfo = h.helicsCreateFederateInfo()

    h.helicsFederateInfoSetCoreName(fedinfo, "Combination Federate A")
    # assert status == 0

    h.helicsFederateInfoSetCoreTypeFromString(fedinfo, "zmq")
    # assert status == 0

    h.helicsFederateInfoSetCoreInitString(fedinfo, fedinitstring)
    # assert status == 0

    h.helicsFederateInfoSetTimeProperty(fedinfo, h.helics_property_time_delta, deltat)
    # assert status == 0

    # h.helicsFederateInfoSetLoggingLevel(fedinfo, 1)
    # assert status == 0

    fed = h.helicsCreateCombinationFederate("Combination Federate A", fedinfo)

    return fed

def destroy_federate(fed, broker=None):
    status = h.helicsFederateFinalize(fed)

    state = h.helicsFederateGetState(fed)
    assert state == 3

    while (h.helicsBrokerIsConnected(broker)):
        time.sleep(1)

    h.helicsFederateFree(fed)

    h.helicsCloseLibrary()

def main():
    # broker = create_broker() # Broker already created from 1st terminal
    fed = create_federate()
    subidloss = []
    pubid_ch = []
    # Register publication
    # pubidA.append(h.helicsFederateRegisterGlobalPublication(fed, "CH1/LoadA", h.helics_data_type_complex, ""))
    # pubidB.append(h.helicsFederateRegisterGlobalPublication(fed, "CH1/LoadB", h.helics_data_type_complex, ""))
    # pubidC.append(h.helicsFederateRegisterGlobalPublication(fed, "CH1/LoadC", h.helics_data_type_complex, ""))
    pubidA = h.helicsFederateRegisterGlobalPublication(fed, "CH1/LoadA", h.helics_data_type_complex, "")
    pubidB = h.helicsFederateRegisterGlobalPublication(fed, "CH1/LoadB", h.helics_data_type_complex, "")
    pubidC = h.helicsFederateRegisterGlobalPublication(fed, "CH1/LoadC", h.helics_data_type_complex, "")
    
    # Register subscription
    subid = h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/totalLoad", "")
    subid1 = h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/voltagea", "")
    subid2 = h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/voltageb", "")
    subid3 = h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/voltagec", "")

    # subid2 = h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss1", "")
    # subid3 = h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ugloss1", "")
    # subid4 = h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txlloss1", "")
    #subid2 = h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/total_real_loss", "")
    #Loss Subscription for GIS
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ugloss1", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ugloss2", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ugloss3", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ugloss4", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ugloss5", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ugloss6", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ugloss7", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ugloss8", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ugloss9", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ugloss10", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ugloss11", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ugloss12", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss1", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss2", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss3", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss4", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss5", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss6", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss7", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss8", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss9", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss10", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss11", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss12", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss13", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss14", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss15", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss16", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss17", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss18", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss19", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss20", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss21", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss22", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss23", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss24", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss25", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss26", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss27", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss28", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss29", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss30", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss31", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss32", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss33", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss34", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss35", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss36", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss37", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss38", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss39", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss40", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss41", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss42", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss43", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss44", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss45", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss46", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss47", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss48", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss49", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss50", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss51", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss52", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss53", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss54", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss55", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss56", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss57", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss58", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss59", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss60", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss61", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss62", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss63", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss64", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss65", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss66", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss67", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss68", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss69", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss70", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss71", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss72", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss73", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss74", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss75", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss76", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss77", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss78", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss79", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss80", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss81", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss82", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss83", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss84", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss85", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss86", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss87", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss88", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss89", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss90", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss91", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss92", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss93", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss94", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss95", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss96", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss97", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss98", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss99", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss100", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss101", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss102", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss103", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss104", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss105", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss106", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss107", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss108", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss109", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss110", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss111", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss112", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss113", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss114", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss115", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss116", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss117", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss118", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss119", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss120", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss121", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss122", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss123", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss124", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss125", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss126", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss127", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss128", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss129", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss130", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss131", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss132", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss133", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss134", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss135", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss136", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss137", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss138", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss139", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss140", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss141", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss142", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss143", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss144", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss145", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss146", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss147", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss148", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss149", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss150", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss151", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss152", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss153", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss154", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss155", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss156", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss157", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss158", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss159", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss160", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss161", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss162", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss163", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss164", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss165", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss166", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss167", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss168", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss169", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss170", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss171", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss172", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss173", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss174", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss175", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss176", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss177", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss178", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss179", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss180", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss181", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss182", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss183", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss184", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/txloss185", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss1", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss2", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss3", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss4", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss5", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss6", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss7", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss8", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss9", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss10", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss11", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss12", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss13", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss14", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss15", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss16", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss17", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss18", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss19", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss20", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss21", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss22", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss23", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss24", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss25", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss26", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss27", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss28", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss29", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss30", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss31", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss32", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss33", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss34", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss35", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss36", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss37", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss38", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss39", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss40", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss41", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss42", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss43", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss44", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss45", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss46", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss47", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss48", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss49", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss50", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss51", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss52", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss53", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss54", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss55", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss56", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss57", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss58", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss59", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss60", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss61", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss62", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss63", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss64", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss65", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss66", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss67", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss68", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss69", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss70", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss71", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss72", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss73", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss74", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss75", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss76", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss77", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss78", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss79", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss80", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss81", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss82", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss83", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss84", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss85", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss86", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss87", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss88", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss89", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss90", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss91", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss92", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss93", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss94", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss95", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss96", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss97", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss98", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss99", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss100", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss101", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss102", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss103", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss104", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss105", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss106", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss107", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss108", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss109", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss110", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss111", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss112", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss113", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss114", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss115", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss116", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss117", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss118", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss119", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss120", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss121", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss122", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss123", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss124", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss125", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss126", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss127", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss128", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss129", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss130", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss131", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss132", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss133", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss134", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss135", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss136", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss137", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss138", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss139", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss140", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss141", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss142", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss143", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss144", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss145", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss146", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss147", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss148", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss149", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss150", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss151", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss152", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss153", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss154", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss155", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss156", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss157", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss158", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss159", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss160", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss161", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss162", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss163", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss164", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss165", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss166", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss167", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss168", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss169", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss170", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss171", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss172", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss173", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss174", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss175", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss176", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss177", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss178", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss179", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss180", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss181", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss182", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss183", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss184", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss185", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss186", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss187", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss188", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss189", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss190", ""))
    subidloss.append(h.helicsFederateRegisterSubscription(fed, "DistributionSim_B2_G_1/ohloss191", ""))

    # Register endpoint
    epid = h.helicsFederateRegisterEndpoint(fed, "ep1", None)
    
    # h.helicsSubscriptionSetDefaultComplex(subid, 0, 0)
    
    # Enter execution mode
    h.helicsFederateEnterExecutingMode(fed)
    locations=1
    hours = 24
    #SOC=0.5
    season="winter"
    seconds = int(60 * 60 * hours)
    FeederP_max=1
    Ploss_max=1
    IF_max=0.1
    grantedtime = -1
    random.seed(0)
    import chargerLoad as ch
    import Gridscore as gis
    for t in range(0, seconds, 300):
        #c = complex(7967.43, 0) + (100*(random.random() - 0.5)/2)
        # SOC= Get latest SOC from Transit SImulation or construct a funciton to update SOC based on time elapsed form begining of charge
        c=ch.Chload1(grantedtime)
        logger.info("Charger Load = {} W".format(abs(c)*1000))
        status = h.helicsPublicationPublishComplex(pubidA, c,100)
        status = h.helicsPublicationPublishComplex(pubidB, c, 100)
        status = h.helicsPublicationPublishComplex(pubidC, c, 100)
        # status = h.helicsEndpointSendEventRaw(epid, "fixed_price", 10, t)
        while grantedtime < t:
            grantedtime = h.helicsFederateRequestTime(fed, t)
        time.sleep(1)
        rValue, iValue = h.helicsInputGetComplex(subid) # substation power demand
        VraValue, ViaValue = h.helicsInputGetComplex(subid1) #charger node voltage A
        VrbValue, VibValue = h.helicsInputGetComplex(subid2)  #charger node voltage B
        VrcValue, VicValue = h.helicsInputGetComplex(subid3)  #charger node voltage C
        Total_real_loss = 0
        for i in range(1, len(subidloss)):
            LrValue, LiValue = h.helicsInputGetComplex(subidloss[i])
            Total_real_loss = Total_real_loss+LrValue
        Gridscore,Ploss_max,FeederP_max,IF_max = gis.gridscore(VraValue,ViaValue,VrbValue,VibValue,VrcValue,VicValue,Total_real_loss,rValue, FeederP_max, Ploss_max,IF_max)
        gis.GIS_store(grantedtime, Gridscore)
        #UGrValue, UGiValue = h.helicsInputGetComplex(subid3)
        #TXLrValue, TXLiValue = h.helicsInputGetComplex(subid4)
        #OHRloss = h.helicsInputGetDouble(subid2)
        logger.info("Python Federate grantedtime = {}".format(grantedtime))
        logger.info("Load value = {} MVA".format(complex(rValue, iValue)/1000))
        logger.info("Voltage value = {} V".format(complex(VraValue, ViaValue)/1))
        #logger.info("OHLoss = {} VA".format(complex(OHrValue, OHiValue)/1))
        #logger.info("UGLoss = {} VA".format(complex(UGrValue, UGiValue)/1))
        #logger.info("TXLLoss = {} VA".format(complex(TXLrValue, TXLiValue)/1))
        #logger.info("Loss value = {} W".format(double(OHRloss)/1))
        
    t = 60 * 60 * 24
    while grantedtime < t:
        grantedtime = h.helicsFederateRequestTime(fed, t)
    logger.info("Destroying federate")
    destroy_federate(fed)

if __name__ == "__main__":
    main()
    logger.info("Done!")